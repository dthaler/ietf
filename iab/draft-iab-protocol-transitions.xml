<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
     which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY RFC1883 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1883.xml">
<!ENTITY RFC1933 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1933.xml">
<!ENTITY RFC1945 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1945.xml">
<!ENTITY RFC2616 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2616.xml">
<!ENTITY RFC2893 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2893.xml">
<!ENTITY RFC3168 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3168.xml">
<!ENTITY RFC3424 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3424.xml">
<!ENTITY RFC3692 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3692.xml">
<!ENTITY RFC4380 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4380.xml">
<!ENTITY RFC4632 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4632.xml">
<!ENTITY RFC4690 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4690.xml">
<!ENTITY RFC5211 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5211.xml">
<!ENTITY RFC5218 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5218.xml">
<!--
<!ENTITY RFC5891 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5891.xml">
-->
<!ENTITY RFC5894 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5894.xml">
<!ENTITY RFC5895 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5895.xml">
<!ENTITY RFC6055 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6055.xml">
<!ENTITY RFC6146 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6146.xml">
<!ENTITY RFC6269 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6269.xml">
<!ENTITY RFC6455 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6455.xml">
<!ENTITY RFC6709 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6709.xml">
<!ENTITY RFC7021 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7021.xml">
<!ENTITY RFC7228 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7228.xml">
<!ENTITY RFC7230 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7230.xml">
<!ENTITY RFC7301 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7301.xml">
<!ENTITY RFC7305 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7305.xml">
<!ENTITY RFC7540 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7540.xml">
<!ENTITY RFC7541 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7541.xml">
<!ENTITY RFC7754 PUBLIC "" "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7754.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
     please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
     (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of ][1 -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-iab-protocol-transitions-06.txt"
     ipr="trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN"
     they will automatically be output with "(if approved)" -->

  <!-- ***** FRONT MATTER ***** -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the
         full title is longer than 39 characters -->

    <title abbrev="Planning for Transition">Out With the Old and In With the New: Planning for Protocol Transitions</title>

    <!--add 'role="editor"' below for the editors if appropriate -->

    <author initials="D." surname="Thaler" fullname="Dave Thaler" role="editor">
          <organization>Microsoft</organization>
          <address>
            <postal>
              <street>One Microsoft Way</street>
              <city>Redmond</city>
              <region>WA</region>
              <code>98052</code>
              <country>US</country>
            </postal>
            <email>dthaler@microsoft.com</email>
          </address>
        </author>

    <date/>

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill
         in the current day for you. If only the current year is specified, xml2rfc will fill
     in the current day and month for you. If the year is not the current one, it is
     necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the
     purpose of calculating the expiry date).  With drafts it is normally sufficient to
     specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>General</area>

    <workgroup>Internet Architecture Board</workgroup>

    <!-- WG name at the upperleft corner of the doc,
         IETF is fine for individual submissions.
     If this element is not present, the default is "Network Working Group",
         which is used by the RFC Editor as a nod to the history of the IETF. -->

    <abstract>
      <t> Over the many years since the introduction of the Internet Protocol,
          we have seen a number of transitions from one protocol or technology to another,
          throughout the protocol stack.  Many protocols and
          technologies were not designed to enable smooth transition to
          alternatives or to easily deploy extensions, and thus some transitions,
          such as the introduction of IPv6, have been difficult.  This document
          attempts to summarize some basic principles to enable future transitions,
          and also summarizes what makes for a good transition plan.
      </t>
    </abstract>
  </front>

  <middle>

    <section title="Introduction" anchor="intro">
      <t> A "transition" is the process or period of changing from one state
          or condition to another.  There are several types of such transitions,
          including both technical transitions (e.g., changing protocols or
          deploying an extension) and organizational transitions (e.g., changing
          what organization manages a web site).
          This document focuses solely on technical transitions, although some
          principles might apply to other types as well.
      </t>
      <!-- DT 2/17/17 added to address Eliot Lear feedback about decommissioning,
           and Dave Crocker feedback about adoption vs transition.
        -->
      <t> In this document we use the term transition generically to apply to any of:
         <list style="symbols">
         <t> adoption of a new protocol where none existed before,
         </t>
         <t> deployment of a new protocol that obsoletes a previous protocol,
         </t>
         <t> deployment of a updated version of an existing protocol, or
         </t>
         <t> decommissioning of an obsolete protocol.
         </t>
         </list>
      </t>
      <t> There have been many IETF and IAB RFCs and IAB statements discussing
          transitions of various sorts.  Most are protocol-specific documents
          about specific transitions.  For example, some relevant ones in which
          the IAB has been involved include:
      </t>
      <t><list style="symbols">
          <t> IAB RFC 3424 <xref target="RFC3424"/> recommended that any technology
              for so-called "unilateral self-address fixing (UNSAF)" across NATs
              include an exit strategy to transition away from such a mechanism.
              Since the IESG, not the IAB, approves IETF documents, the IESG
              thus became the body to enforce (or not) such a requirement.
          </t>
          <t> IAB RFC 4690 <xref target="RFC4690"/> gave recommendations around
              internationalized domain names. It discussed issues around the process
              of transitioning to new versions of Unicode, and this resulted in the
              creation of the IETF Precis WG to address this problem.
          </t>
          <t> The IAB statement on "Follow-up-work on NAT-PT"
              <xref target="IabIpv6TransitionStatement"/> pointed out gaps at the time
              in transitioning to IPv6, and this resulted in the rechartering of the
              IETF Behave WG to solve this problem.
          </t>
      </list></t>
      <t> More recently, the IAB has done work on more generally applicable principles,
          including two RFCs.
      </t>
      <t> IAB RFC 5218 <xref target="RFC5218"/> on "What Makes for a Successful Protocol?"
          studied specifically what factors contribute to, and detract from,
          the success of a protocol and it made a number of recommendations.  It
          discussed two types of transitions: "initial success" (the transition
          to the technology) and extensibility (the transition to updated
          versions of it).  The principles and recommendations in that document
          are generally applicable to all technical transitions. Some important principles
          included:
      </t>
      <t><list style="numbers">
          <t> Incentive: Transition is easiest when the benefits come to those bearing the costs.
              That is, the benefits should outweigh the costs at *each* entity.
              Some successful cases did this by providing incentives (e.g., tax breaks),
              or by reducing costs (e.g., freely available source), or by imposing
              costs of not transitioning (e.g., regulation), or even by narrowing
              the scenarios of applicability to just the cases where benefits do
              outweigh costs at all relevant entities.
          </t>
          <t> Incremental Deployability: Backwards compatibility makes transition easier.
              Furthermore, transition is easiest when changing only one entity still
              benefits that entity.  In the easiest case, the benefit immediately
              outweighs the cost and so entities are naturally incented to transition.
              More commonly, the benefits only outweigh the costs once a significant
              number of other entities also transition.  Unfortunately, in such cases,
              the natural incentive is often to delay transitioning.
          </t>
          <t> Total Cost: It is import to consider costs that go beyond the core hardware and
              software, such as operational tools and processes,
              personnel training, business model (accounting/billing) dependencies,
              and legal (regulation, patents, etc.) costs.
          </t>
          <t> Extensibility: Design for extensibility <xref target="RFC6709"/> so that
              things can be fixed up later.
          </t>
      </list></t>
      <t> IAB RFC 7305 <xref target="RFC7305"/> reported on a IAB workshop
          on Internet Technology Adoption and Transition (ITAT).  Like
          RFC 5218, this workshop also discussed economic aspects of transition,
          not just technical aspects.  Some important observations included:
      </t>
      <t><list style="numbers">
          <t> Early-Adopter Incentives: Part of Bitcoin's strategy was extra incentives
              for early adopters compared to late adopters.  That is, providing a long-term
              advantage to early
              adopters can help stimulate transition even when the initial costs outweigh
              the initial benefit.
          </t>
          <t> Policy Partners: Policy-making organizations of various sorts (RIRs,
              ICANN, etc.) can be important partners in enabling and facilitating
              transition.
          </t>
      </list></t>
      <t> The remainder of this document continues the discussion started in those two RFCs
          and provides some additional thoughts on the topic of transition strategies
          and plans.
      </t>
    </section>

    <!-- DT 2/17/17 added to address comments from Joe Touch, Tom Herbert, and Dave Crocker -->
    <section title="Extensibility">
      <t> Many protocols are designed to be extensible, using mechanisms such as
          options, version negotiation, etc., to ease the transition to new features.
          However, implementations often succumb to commercial pressures to ignore this
          flexibility in favor of performance or economy, and as a result such extension
          mechanisms (e.g., IPv6 Hop-by-Hop Options) often experience problems in practice
          once they begin to be used.  In other cases, a mechanism might be put into a protocol
          for future use without having an adequate sense of how it will be used, which
          causes problems later (e.g., SNMP's original 'security' field, or the IPv6 Flow Label).
          Thus, designers need to consider whether it
          would be easier to transition to a new protocol than it would be to ensure that
          an extension point is correctly specified and implemented such that it would be
          available when needed.
      </t>
      <t> A protocol that plans for its own eventual replacement during its
          design makes later transitions easier.  Developing and testing a
          design for the technical mechanisms needed to signal or negotiate a
          replacement is essential in such a plan.
      </t>
      <t> When there is interest in translation between a new mechanism and an old one,
          complexity of such translation must also be considered.  The major challenge
          in translation is for semantic differences.  Often, syntactic differences can be
          translated seamlessly; semantic ones almost never.  Hence when designing for translatability,
          syntactic and semantic differences should be clearly documented.
      </t>
      <t> See RFC 3692 <xref target="RFC3692"/> and RFC 6709 <xref target="RFC6709"/>
          for more discussion of design considerations for protocol extensions.
      </t>
    </section>

    <section title="Transition vs. Co-existence" anchor="coexist">
        <t> There is an important distinction between a strict "flag-day" style transition
            where an old mechanism
            is immediately replaced with a new mechanism, vs. a looser co-existence based
            approach where transition proceeds in stages where a new mechanism is first
            added alongside an existing one for some overlap period, and then the old
            mechanism is removed at a later stage.
        </t>
        <t> When a new mechanism is backwards compatible with an existing mechanism, transition is
            easiest because different parties can transition at different times.
            However, when no backwards compatibility exists such as in the IPv4 to IPv6 transition,
            a transition plan must choose either a "flag day" or a period of co-existence.
            When a large number of entities are involved, a flag day becomes impractical or even impossible.
            Coexistence, on the other hand, involves additional costs of maintaining two
            separate mechanisms during the overlap period which could be quite long.
            Furthermore, the longer the overlap period, the more the old mechanism might
            get further deployment and thus increase the overall pain of transition.
        </t>
        <t> Often the decision between a "flag day" and a sustained co-existence period
            may be complicated when differing incentives are involved (e.g., see the
            case studies in the Appendix).
            <!--
                , such as in the case of IDNA2008
                <xref target="RFC5891"/>
                <xref target="RFC5895"/>
                and Unicode TR46
                <xref target="TR46"/>.
              -->
        </t>
        <t>
            Some new protocols or protocol versions are developed with the intent of never
            retiring the protocol they intend to replace.  Such a protocol might only aim to
            address a subset of the use cases for which an original is used.  For these
            protocols, coexistence is the end state.  For instance, this would not apply to
            IPv6, which aims to completely replace IPv4.
        </t>
        <t>
            Indefinite coexistence as an approach could be viable if removal of the existing
            protocol is not an urgent goal. It might also be necessary for "wildly successful"
            protocols that have more disparate uses than can reasonably be considered during the
            design of a replacement. For example, HTTP/2 does not aspire to cause the eventual
            decommissioning of HTTP/1.1 for these reasons.
        </t>
    </section>

    <section title="Translation/Adaptation Location">
        <t> A translation or adaptation mechanism is often required if the old and new
            mechanisms are not interoperable.  Care must be taken when determining
            whether one will work and where such a translator is best placed.
        </t>
        <t>
            A translation mechanism may not work for every use case.  For
            example, if a translation from one protocol (or protocol version)
            to another produces indeterminate results, translation will not
            work reliably.  In addition, if translation always produces a
            downgraded protocol result, the incentive considerations in
            <xref target="incentives"/> will be relevant.
        </t>
        <t> Requiring a translator in the middle of the path can hamper end-to-end
            security and reliability.  For example, see the discussion of
            network-based filtering in <xref target="RFC7754"/>.
        </t>
        <t> On the other hand, requiring a translation layer within an
            endpoint can be a resource issue in some cases, such as if the endpoint
            could be a constrained node <xref target="RFC7228"/>.
        </t>
        <t> In addition, when a translator is within an endpoint, it can can attempt
            to hide the difference between an older protocol and a newer protocol,
            either by exposing one of the two sets of behavior to applications and
            internally mapping it to the other set of behavior, or by exposing a
            higher level of abstraction which is then alternatively mapped to either
            one depending on detecting which is needed.  In contrast, when a
            translator is in the middle of the path, typically only the first
            approach can be done since the middle of the path is typically unable
            to provide a higher level of abstraction.
        </t>
        <t> Any transition strategy for a non-backward-compatible mechanism should
            include a discussion of where it is placed and a rationale. The transition
            plan should also consider the transition away from the use of translation
            and adaptation technologies.
        </t>
    </section>

    <section title="Transition Plans">
        <t> A review of the case studies described in Appendix A suggests
            that a good transition plan includes at least the following
            components: an understanding of what is already deployed and in use,
            an explanation of incentives for each entity involved,
            a description of the phases of the transition along with a
            proposed criteria for each phase, a method for measuring the transition's success,
            a contingency plan for failure of the transition, and an effective
            method for communicating the plan to the entities involved and
            incorporating their feedback thereon. We recommend that such
            criteria be considered when evaluating proposals to transition to
            new or updated protocols. Each of these components is discussed in
            the subsections below.
        </t>

        <section title="Understanding of Existing Deployment">
            <t> Often an existing mechanism has variations in implementations
                and operational deployments.  For example, a specification might
                include optional behaviors that may or may not be implemented
                or deployed.  In addition, there may also be implementations or
                deployments that deviate from, or include vendor-specific
                extensions to, various aspects of a specification.  It is
                important when considering a transition to understand what
                variations one is intending to transition from or co-exist with,
                since the technical and non-technical issues may vary greatly as
                a result.
            </t>
        </section>

        <section title="Explanation of Incentives" anchor="incentives">
            <t> A transition plan should explain the incentives to each
                involved entity to support the transition. Note here that
                many entities other than the endpoint applications and
                their users may be affected, and the barriers to transition
                may be nontechnical as well as technical. When considering
                these incentives, also consider network operations tools,
                practices, and processes, personnel training, accounting and
                billing dependencies, and legal and regulatory incentives.
            </t>
            <t> If there is opposition to a particular new protocol (e.g.,
                from another standards organization, or a government, or
                some other affected entity), various non-technical issues
                arise that should be part of what is planned and dealt with.
                Similarly, if there are significant costs or other disincentives,
                the plan needs to consider how to overcome them.
            </t>
            <t> It's worth noting that an analysis of incentives can be
                difficult and at times led astray by wishful thinking,
                as opposed to adequately considering economic realities.
                Thus, honestly considering any barriers to adoption, and
                justifying one's conclusions about others' incentives,
                are key to a successful analysis.
            </t>
        </section>

        <section title="Description of Phases and Proposed Criteria">
            <t> Transition phases might include pilot/experimental deployment,
                coexistence, deprecation, and removal phases for a transition
                from one technology to another incompatible one.
            </t>

            <t> Timelines are notoriously difficult to predict and impossible
                to impose on uncoordinated transitions at the scale of the
                Internet, but rough estimates can sometimes help all involved entities
                to understand the intended duration of each phase.  More often,
                it is useful to provide criteria that must be met in order
                to move to the next phase.  For example, is removal scheduled
                for a particular date (e.g., FCC regulation to discontinue analog
                TV broadcasts in the U.S. by June 12, 2009)?  Or is removal
                to be based on the use of the old mechanism falling below a
                specified level?  Or some other criteria?
            </t>

            <!-- DT added 2/17/17 per Dave Crocker comment, Lee please check -->
            <t> As one example, RFC 5211 <xref target="RFC5211"/> proposed
                a transition plan for IPv6 that included a proposed timeline,
                and criteria specific to each phase.  While the timeline was
                not accurately followed, the phases and timeline did serve as
                inputs to the World IPv6 Day and World IPv6 Launch events.
            </t>
        </section>

        <section title="Measurement of Success">
            <t> The degree of deployment of a given protocol or feature at a
                given phase in its transition can be measured differently,
                depending on its design. For example, server-side protocols
                and options which identify themselves through a versioning or
                negotiation mechanism can be discovered through active
                Internet measurement studies.
            </t>
        </section>

        <!-- DT updated 2/17/17 to address Eliot Lear and Dave Crocker comments -->
        <section title="Contingency Planning">
            <t> A contingency plan can be as simple as providing for indefinite
                coexistence between an old and new protocol, or for reverting to
                the old protocol until an updated version of the new protocol is
                available.  Such a plan is useful in the event that unforeseen
                problems are discovered during deployment, so that such problems
                can be quickly mitigated.
            </t>
            <t> For example, World IPv6 Day included a contingency plan which
                was to revert to the original state at the end of the day.  After
                discovering no issues, some participants found that this contingency
                plan was unnecessary and kept the new state.
            </t>
        </section>

        <section title="Communicating the Plan">
            <t> Many of the entities involved in a protocol transition may not
                be aware of the IETF or the RFC series, so dissemination
                through other channels is key for sufficiently broad
                communication of the transition plan. While flag days are
                impractical at Internet scale, coordinated "events" such as
                World IPv6 Launch may improve general awareness of an ongoing
                transition.
            </t>
            <!-- DT added 2/17/17 per Dave Croker comment -->
            <t> Also, there is often a need for an entity facilitating the transition
                through advocacy and focus. Such an entity, independent of the IETF,
                can be key in communicating the plan and its progress.
            </t>
            <t> Some transitions have a risk of breaking backwards compatibility
                for some fraction of users.  In such a case, when a transition
                affects competing entities facing the risk of losing customers to
                each other, there is an economic disincentive to transition.  Thus,
                one role for a facilitating entity is to get competitors to transition
                during the same timeframe, so as to mitigate this fear.  For example,
                the success of World IPv6 Launch was largely due to ISOC playing this role.
            </t>
        </section>
    </section>

    <section title="Security Considerations" anchor="security">
        <t> This document discusses attributes of protocol transitions.  Some
            types of transition can adversely affect security or privacy.  For
            example, requiring a translator in the middle of the path may hamper
            end-to-end security and privacy, since it creates an attractive target.
            For further discussion of some of these issues, see Section 5 of
            <xref target="RFC7754"/>.
        </t>
        <!-- DT 2/21/17 added to address Brian Carpenter's feedback in ticket 380 -->
        <t> In addition, coexistence of two protocols in general increases risk in the
            sense that it doubles the attack surface and allows attacks that exploit
            the weaker of the two protocols by claiming not to understand the stronger one.
        </t>
    </section>

    <section title="IANA Considerations">
        <t> This document requires no actions by the IANA.
        </t>
    </section>

    <!-- DT 2/17/17 added to help address comment from Dave Crocker and Eliot Lear about wanting
         more guidance on "how" to apply these principles.
      -->
    <section title="Conclusion">
        <t> This document summarized the set of issues that should be considered by protocol
            designers and deployers to facilitate such transition and provides pointers to
            previous work (e.g., <xref target="RFC3692"/>, <xref target="RFC6709"/>) that
            provided detailed design guidelines.  This document also covered what makes for
            a good transition plan, and includes several case studies that provide examples.
            As more experience is gained over time on how to successfully apply these principles
            and design effective transition plans, we encourage the community to share such
            learnings with the IETF community and on the architecture-discuss@ietf.org mailing
            list so that any future document on this topic can leverage such experience.
        </t>
    </section>

    <section title="Acknowledgements">
        <t> This document is a product of the IAB Stack Evolution Program, with input from
            many others.  In particular, Dave Crocker, Eliot Lear, Joe Touch, Cameron Byrne,
            the IETF Applications Area WG, and others provided helpful input on this document.
        </t>
    </section>

    <section title="IAB Members at the Time of This Writing">
        <figure>
            <artwork>
Jari Arkko
Ralph Droms
Ted Hardie
Joe Hildebrand
Russ Housley
Lee Howard
Erik Nordmark
Robert Sparks
Andrew Sullivan
Dave Thaler
Martin Thomson
Brian Trammell
Suzanne Woolf
            </artwork>
        </figure>
    </section>
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>
    <references title="Informative References">
      &RFC1883;
      &RFC1933;
      &RFC1945;
      &RFC2616;
      &RFC2893;
      &RFC3168;
      &RFC3424;
      &RFC3692;
      &RFC4380;
      &RFC4632;
      &RFC4690;
      &RFC5211;
      &RFC5218;
<!--
      &RFC5891;
-->
      &RFC5894;
      &RFC5895;
      &RFC6055;
      &RFC6146;
      &RFC6269;
      &RFC6455;
      &RFC6709;
      &RFC7021;
      &RFC7228;
      &RFC7230;
      &RFC7301;
      &RFC7305;
      &RFC7540;
      &RFC7541;
      &RFC7754;

      <reference anchor="IPv6Survey2011"
                 target="https://www.nro.net/wp-content/uploads/ipv6_deployment_survey.pdf">
        <front>
          <title>IPv6 Deployment Survey</title>
          <author initials='M.' surname='Botterman' fullname='Maarten Botterman'/>
          <date year="2011"/>
        </front>
      </reference>

      <reference anchor="IPv6Survey2015"
                 target="http://www.globalservices.bt.com/static/assets/pdf/products/diamond_ip/IPv6-Survey-Report-2015.pdf">
        <front>
          <title>IPv6 Industry Survey Report</title>
          <author>
            <organization>British Telecommunications</organization>
          </author>
          <date year="2015" month="August" day="19"/>
        </front>
      </reference>

      <reference anchor="IabIpv6TransitionStatement"
                 target="https://www.iab.org/documents/correspondence-reports-documents/docs2007/follow-up-work-on-nat-pt//">
        <front>
          <title>Follow-up work on NAT-PT</title>
          <author>
            <organization>IAB</organization>
          </author>
          <date year="2007" month="October" day="10"/>
        </front>
      </reference>

      <reference anchor="HTTP0.9"
                 target="https://www.w3.org/Protocols/HTTP/AsImplemented.html">
        <front>
          <title>The Original HTTP as defined in 1991</title>
          <author>
            <organization>Tim Berners-Lee</organization>
          </author>
          <date year="1991"/>
        </front>
      </reference>

      <reference anchor="TR46"
                 target="http://www.unicode.org/reports/tr46/">
        <front>
          <title>Unicode IDNA Compatibility Processing</title>
          <author>
            <organization>Unicode Consortium</organization>
          </author>
          <date year="2015" month="June" day="2"/>
        </front>
      </reference>

      <reference anchor="TSV2007"
                 target="http://www.ietf.org/proceedings/68/slides/tsvarea-3/sld1.htm">
        <front>
          <title>Implementation Report on Experiences with Various TCP RFCs</title>
          <author initials='M.' surname='Sridharan' fullname='Murari Sridharan'/>
          <author initials='D.' surname='Bansal' fullname='Deepak Bansal'/>
          <author initials='D.' surname='Thaler' fullname='Dave Thaler'/>
          <date year="2007" month="March"/>
        </front>
        <seriesInfo name="Proceedings of IETF" value="68"/>
      </reference>

      <reference anchor="PAM2015"
                 target="target: http://ecn.ethz.ch/ecn-pam15.pdf">
        <front>
          <title>Enabling Internet-Wide Deployment of Explicit Congestion Notification</title>
          <author initials='B.' surname='Trammell' fullname='Brian Trammell'/>
          <author initials='M.' surname='Kuehlewind' fullname='Mirja Kuehlewind'/>
          <author initials='D.' surname='Boppart' fullname='Damiano Boppart'/>
          <author initials='I.' surname='Learmonth' fullname='Iain Learmonth'/>
          <author initials='G.' surname='Fairhurst' fullname='Gorry Fairhurst'/>
          <author initials='R.' surname='Scheffenegger' fullname='Richard Scheffenegger'/>
          <date year="2015"/>
        </front>
        <seriesInfo name="Proceedings of PAM" value="2015"/>
      </reference>
    </references>

    <section title="Case Studies">
        <t> Appendix A of <xref target="RFC5218"/> describes a number of case studies
            that are relevant to this document and highlight various transition problems
            and strategies (see for instance the Inter-Domain Multicast case study
            in Section A.4 of <xref target="RFC5218"/>).
            We now include several additional case studies that focus on transition
            problems and strategies.  Many other equally good case studies could have
            been included, but, in the interests of brevity, only a sampling is included
            here that is sufficient to justify the conclusions in the body of this document.
        </t>

        <section title="Explicit Congestion Notification">
            <t> Explicit Congestion Notification (ECN) is a mechanism to replace
                loss as the only signal for the detection of congestion, with an
                explicit signal sent from a router to the recipient of a packet,
                then reflected back to the sender. It was standardized in 2000
                in <xref target="RFC3168"/>, and the mechanism consists of two
                parts: congestion detection in the IP layer, reusing two bits of
                the old IP Type of Service (TOS) field, and congestion feedback
                in the transport layer. Feedback in TCP uses two TCP flags, ECN
                Echo and Congestion Window Reduced. Together with a suitably
                configured active queue management (AQM), ECN can improve TCP
                performance on congested links.
            </t>
            <t> The deployment of ECN is a case study in failed transition followed
                by possible redemption. Initial deployment of ECN in the early and
                mid 2000s led to severe problems with some network equipment, including
                home router crashes and reboots when packets with ECN IP or TCP
                flags was received <xref target="TSV2007"/>.
                This led to firewalls stripping ECN IP and TCP flags, or even
                dropping packets with these flags set. This stalled deployment.
                The need for both endpoints (to negotiate and support ECN) and
                on-path devices (to mark traffic when congestion occurs) to
                cooperate in order to see any benefits from ECN deployment was a
                further issue. The deployment of ECN across the Interent had failed.
            </t>
            <t> In the late 2000s, Linux and Windows servers began defaulting to "passive ECN
                support", meaning they would negotiate ECN if asked by the
                client, but would not ask to negotiate ECN by default. This
                decision was regarded as without risk: only if a client were
                explicitly configured to negotiate ECN would any possible
                connectivity problems surface. Gradually, this has increased
                server support in the Internet from near zero in 2008, to 11%
                of the top million Alexa webservers in 2011, to 30% in 2012,
                to 65% in late 2014. In the meantime, the risk to connectivity
                of ECN negotiation has reduced dramatically <xref target="PAM2015"/>,
                leading to ongoing work to make Windows, Apple iOS, OSX, and Linux clients
                negotiate ECN by default. It is hoped that a critical mass of
                clients and servers negotiating ECN will provide an incentive to
                mark congestion on ECN-enabled traffic, thus breaking the logjam.
            </t>
        </section>

        <!--
        <section title="Classless Inter-Domain Routing (CIDR)">
            <t>TODO To be filled in... <xref target="RFC4632"/></t>
        </section>
        -->

        <section title="Internationalized Domain Names">
            <t>The deployment of Internationalized Domain Names (IDN) has a long
               and complicated history.  This should not be surprising, since
               internationalization deals with language and cultural issues regarding
               differing expectations of users around the world, thus making it
               inherently difficult to agree on common rules. Furthermore,
               because human languages evolve and change over time, even if
               common rules can be established, there is likely to be a need to
               review and update them regularly.
            </t>
            <t>There have been multiple technical transitions related to IDNs, including
               the introduction of non-ASCII in DNS, the transition to each new version
               of Unicode, and the transition from IDNA 2003 to IDNA 2008.
               A brief history of the introduction of non-ASCII in DNS and the various
               complications that arose therein, can be found in section 3 of
               <xref target="RFC6055"/>.  While IDNA 2003 was limited to Unicode
               version 3.2 only, one of the IDNA 2008 changes was to decouple its rules
               from any particular version of Unicode (see <xref target="RFC5894"/>,
               especially section 1.4, for more discussion of this point, and
               see <xref target="RFC4690"/> for a list of other issues with IDNA 2003
               that motivated IDNA 2008).  However, the transition
               from IDNA 2003 to IDNA 2008 itself presented a problem since
               IDNA 2008 did not preserve backwards compatibility with IDNA 2003 for
               a couple of codepoints.
               Investigations and discussions with affected parties led to the IETF
               ultimately choosing IDNA 2008 because the overall gain by moving to
               IDNA 2008 to fix the problems with IDNA 2003
               <!-- becoming independent of Unicode Version -->
               was seen to be much greater than the problems due to the few
               incompatibilities at the time of the change, as not many IDNs were in use,
               and even fewer that might see incompatibilities.
            </t>
            <t>A couple of browser vendors in particular were concerned about the differences between
               IDNA 2003 and IDNA 2008, and the fact that if a browser stopped being
               able to get to some site, or unknowingly sent a user to a different
               (e.g., phishing) site instead, the browser would be blamed.  As such,
               any user-perceivable change from IDNA 2003 behavior would be painful
               to the vendor to deal with, and hence they could not depend on
               solutions that would need action by other entities.
            </t>
            <t>Thus, to deal with issues like such incompatibilities, some applications and client-side
               frameworks wanted to map one string into another (namely, a string that
               would give the same result as when IDNA 2003 was used) before invoking DNS.
            </t>
            <t>To provide such mapping (and some other functioanlity), the Unicode
               Consortium published <xref target="TR46"/>
               that continued down the path of IDNA 2003 with a code point by code point
               selection mechanism. This was implemented by some,
               but never adopted by the IETF.
            </t>
            <t>Meanwhile, the IETF did not publish any mapping mechanism, but <xref target="RFC5895"/>
               was published on the Independent Submission stream.  In discussions around
               mapping, one of the key topics was about how long the transition should last.
               At one end of the duration spectrum is a flag day where some entities would
               be broken initially but the change would happen before IDN usage became even
               more ubiquitous.  At the other end of the spectrum is the need to maintain
               mappings indefinitely.  Local incentives at each entity who needed to change,
               however, meant that a short timeframe was impractical.
            </t>
            <t>There are many affected types of entities with very different
               incentives.  For example, the incentives affecting browser vendors,
               registries, domain name marketers and applicants, app developers, and protocol
               designers are each quite different, and the various solutions
               require changes by multiple types of entities, where the benefits
               do not always align with the costs.
               If there is some group (or even an individual) that is opposed to a
               change/transition and able to put significant resources behind their
               opposition, transitions get a lot harder.
            </t>
            <t>Finally, there are multiple naming contexts, and the protocol behavior (including
               how internationalized domain names are handled) within each naming context can be different.
               Hence applications and frameworks often encounter a variety of behaviors
               and may or may not be designed to deal with them.  See sections 2 and 3 of
               <xref target="RFC6055"/> for more discussion.
            </t>
            <t>In summary, all this diversity can cause problems for each affected entity,
               especially if a competitor does not have such a problem, e.g., for browser
               vendors if competing browsers do not have the same problems, or for an
               email server provider if competing server providers do not have the same
               problems.
            </t>
        </section>

        <section title="IPv6">
            <t>Twenty-one years after publication of <xref target="RFC1883"/>, the transition
               to IPv6 is still in progress. The first document to describe a
               transition plan (<xref target="RFC1933"/>, later obsoleted by <xref target="RFC2893"/>)
               was published less than a year after the protocol itself. It recommended co-existence (dual-stack
               or tunneling technology) with the expectation that over time, all hosts would have IPv6, and
               IPv4 could be quietly retired.
            </t>
            <t> In the early stages, deployment was limited to peer-to-peer uses, tunneled
                over IPv4 networks.  For example, Teredo <xref target="RFC4380"/> aligned the cost
                of fixing the problem with the benefit, and allowed for incremental benefits to those
                who used it.
            </t>
            <t> Operating System vendors had incentives because with such tunneling protocols,
                they could get peer-to-peer apps working without depending on any infrastructure changes.
                That resulted in the main apps using IPv6 being in the peer-to-peer category
                (BitTorrent, XBox gaming, etc.).
            </t>
            <t> Router vendors had some incentive because IPv6 could be used within an
                intra-domain network more efficiently than tunneling, once the OS vendors already
                had IPv6 support and some special-purpose apps existed.
            </t>
            <!-- For most of that time, few organizations made significant progress in
                 deployment on the Internet.
            -->
            <t>
               For content providers and ISPs, on the other hand, there was little incentive for
               deployment: there was no incremental benefit to deploying locally.
               Since everyone already had IPv4,
               there was no network effect benefit to deploying IPv6. Even as proponents
               argued that workarounds to extend the life of IPv4--such as CIDR, NAT, and
               stingy allocations--made it more complex, IPv4 continued to work well enough
               for most applications.
            </t>
            <t>Workarounds to NAT problems documented in <xref target="RFC6269"/> and <xref target="RFC7021"/>
               included ICE, STUN, and TURN,
               technologies that allowed those experiencing the problems to deploy technologies to resolve
               them. As with end-to-end IPv6 tunneling (e.g., Teredo), the
               incentives there aligned the cost of fixing the problem with the benefit, and allowed
               for incremental benefits to those who used them. The IAB discussed NAT technology proposals
               <xref target="RFC3424"/> and recommended they be considered short-term fixes, and said that
               proposals must
               include an exit plan, such that they would decline over time. In particular, the IAB warned
               against generalizing NAT solutions, which would lead to greater dependence on them. In some ways,
               these solutions, along with other IPv4 development (e.g., the workarounds above, and
               retrofitting IPsec into IPv4) continued to reduce the incentive to deploy IPv6.
            </t>
            <t>Indeed, not until a few years after IPv4 runout in various Regional Address Registry
               (RIR) regions did IPv6 deployment significantly increase. The RIRs and others conducted
               surveys of different industries and industry segments to learn why people did not deploy
               IPv6 <xref target="IPv6Survey2011"/> <xref target="IPv6Survey2015"/>, which commonly listed
               lack of a business case, lack of training, and lack
               of vendor support as primary hurdles. Arguably forward-looking companies collaborated
               with ISOC on World IPv6 Day and World IPv6 Launch to jump start global IPv6 deployment,
               and arguably their work gave vendors incentives to support IPv6 well.
                Key aspects of World IPv6 Day and World IPv6 Launch that contributed to their successes
                were the communication mechanism, and the measurement metrics and contingency plans
                that were announced in advance.
            </t>
            <t> Several efforts have been made to mitigate the lack of a business case. Some governments
               (South Korea, Japan) provided tax incentives to include IPv6. Other governments (Belgium,
               Singapore) mandated IPv6 support by private companies. Few of these had enough value to
               drive significant IPv6 deployment.
            </t>
            <t>The concern about lack of training is often a common issue in transitions. Because IPv4 is
               so ubiquitous, its use is routine and simplified with common tools, and it is taught in
               network training everywhere. While IPv6 deployment was low, ignorance of it was no
               obstacle to being hired as a network administrator or developer.
               <!-- DT removed since I don't follow what this means
                  Nathalie Kunneke-Trennaman,
                  Trainer for RIPE-NCC said, "The hardest part of teaching IPv6 is teaching remedial IPv4."
                 -->
            </t>
            <t>Organizations with the greatest incentives to deploy IPv6 are those which continue to grow
               quickly, even after IPv4 free pool exhaustion. Thus, ISPs have had varying levels of
               commitment, based on the growth of their user base, services being added (especially video
               over IP), and the number of IPv4 addresses they had available. Cloud-based providers,
               including CDN and hosting companies, have been major buyers of IPv4 addresses, and several
               have been strong deployers and advocates of IPv6.
            </t>
            <t>Different organizations will use different transition models for their networks, based on
               their needs. Some are electing to use IPv6-only hosts in the network with IPv6-IPv4 translation
               at the edge.
               <!-- (e.g., Stateful NAT64 <xref target="RFC6146"/>)  -->
               <!-- such as a data center with SIIT-DC or NAT64, or a mobile network with 464xlat. -->

               Others are using dual-stack hosts with IPv6-only routers in the core of the network,
               and IPv4 tunneled or translated through them to dual-stack edge routers.
               <!-- DS-Lite, 464xlat, etc. -->

               Still others are using native dual-stack throughout the network, but that generally persists as an
               interim measure: adoption of two technologies is not the same as transitioning from one
               technology to another.

               Finally, some walled gardens or isolated networks, such as management networks,
               use IPv6-only end-to-end.
            </t>
            <t>It is impossible to predict with certainty the path IPv6 deployment will have taken
               when it is complete.  Lessons learned so far include aligning costs
               and benefits (incentive), and ensuring incremental benefit (network effect, or backward
               compatibility).
               <!-- DT removed since I disagree with this.  It did help, and that's why Behave we rechartered
                    at the direction of the IAB (see text earlier in the document that referenced that fact).

                  Better translation would not have helped, since it did not work for
                  protocols that use IP addresses (or other layer 3 information) in other parts of the packet.
                 -->
            </t>
        </section>

        <section title="HTTP/2">
            <t> HTTP/2 <xref target="RFC7540"/> is a new version of the popular HTTP protocol <xref target="RFC7230"/>.
                The original versions of HTTP (0.9 <xref target="HTTP0.9"/>, 1.0 <xref target="RFC1945"/>,
                and 1.1 <xref target="RFC2616"/>) have only small differences; each iteration made
                small improvements over the previous version without making major changes.
            </t>
            <t> The changes in HTTP/2 are largely aimed at improving performance.  The primary
                improvement is for request multiplexing, which is supported by request prioritization
                and flow control.  HTTP/2 includes efficiency improvements with header
                compression <xref target="RFC7541"/> and binary framing.
            </t>
            <section title="Bundling of Features with New Versions">
                <t> The bundling of additional constraints on a new version of a protocol could
                    affect adoption by making the transition more costly.  However, the transition
                    to a new version also represents an opportunity to improve multiple aspects of
                    a protocol at the same time.
                </t>
                <t> The HTTP working group decided that a new version of the protocol represented
                    an opportunity to improve security.  HTTP/2 is much stricter about its
                    use of TLS.  In particular, a long list of TLS cipher suites are prohibited,
                    constraints are placed on the key exchange method, and renegotiation is prohibited.
                    These changes did cause deployment problems.  Though most were minor and transitory,
                    disabling renegotiation caused problems for deployments that relied on the feature
                    to authenticate clients and prompted new work to replace the feature.
                </t>
                <t> A number of other features or characteristics of HTTP were identified as
                    potentially undesirable. Several such features were considered for removal during
                    the design process.  This included trailers, the 1xx series of responses, certain
                    modes of request forms, and the unsecured (http://) variant of the protocol. For
                    each of these, the risk to the successful deployment of the new version was
                    considered to be too great to justify removing the feature.  However, deployment
                    of the unsecured variant of HTTP/2 remains extremely limited.
                </t>
            </section>
            <section title="Planning for Replacement">
                <t> HTTP/1.1 provides a mechanism, Upgrade, to transition to an entirely different
                    protocol.  That same facility was little used other than to enable the use of
                    WebSockets <xref target="RFC6455"/>.  However, with performance being a
                    primary motivation for HTTP/2, a new mechanism was needed to avoid spending
                    an additional round trip on this negotiation.  A new mechanism was added to
                    TLS to permit the negotiation of the new version of HTTP: Application Layer
                    Protocol Negotiation (ALPN) <xref target="RFC7301"/>.  Upgrade was used only
                    for the unsecured variant of the protocol.
                </t>
                <t> ALPN was identified as the way in which future protocol versions would be
                    negotiated.  The mechanism was well-tested during development of the
                    specification, which proved that new versions could be deployed safely and
                    easily using ALPN.  Several draft versions of the protocol were successfully
                    deployed during protocol development, and version negotiation was never shown
                    to be an issue.
                </t>
                <t> Confidence that new versions would be easy to deploy if necessary lead to a
                    particular design stance that might be considered unusual in light of the
                    advice in RFC 5218 <xref target="RFC5218"/>, though is completely consistent
                    with RFC 6709 <xref target="RFC6709"/>: many of
                    the ways in which the protocol might be extended were removed unless an
                    immediate need was understood. This decision was made on the basis that it
                    would be easier to revise the entire protocol than it would be to ensure that
                    an extension point was correctly specified and implemented such that it would
                    be available when needed.
                </t>
            </section>
        </section>
    </section>
  </back>
</rfc>
